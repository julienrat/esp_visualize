<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <title>Chart.js demo</title>
        <script src='Chart.js'></script>
    </head>
    <body>
		<canvas id="buyers" width="600" height="400"></canvas>
		

	<script>
var N = 30;
// Array filled with N values at '0'
var zero_array = [];

for (i = 0; i < N; i++)
    zero_array.push(1);

// The data of the chart, describe the differents sets of data you want with points, colors...
var data = {
        labels: zero_array,
        datasets:  [
            {
                label: "DataSet #1", // Name of the line
                data: zero_array, // data to represent
                // The following makes the line way less ugly
                fillColor: "rgba(151,187,205,0.2)",
                strokeColor: "rgba(151,187,205,1)",
                pointColor: "rgba(151,187,205,1)",
                pointStrokeColor: "#fff",
                pointHighlightFill: "#fff",
                pointHighlightStroke: "rgba(151,187,205,1)"
            }
        ]
};

// We wait for everything to be loaded
window.onload = function main() {

    // Get the context of the canvas
    var ctx = document.getElementById("buyers").getContext("2d");

    // Create the Chart object
    var line_example_chart = new Chart(ctx).Line(data);

    // Used for the labels on the X axis
    var label_idx = 1;

	var heap,temp,digi,val_temp;
       
     function rand_value() {
      var xh = new XMLHttpRequest();
      xh.onreadystatechange = function(){
        if (xh.readyState == 4){
          if(xh.status == 200) {
            var res = JSON.parse(xh.responseText);           
            temp=res.analog;
            console.log(temp);
            val_temp=temp.toString();
          } 
        }
      };

        // Remove the point at the far left of the chart
        line_example_chart.removeData();
        
        // Add the random value at the far right of the chart
        line_example_chart.addData([temp], label_idx++);
        xh.open("GET", "/all", true);
		xh.send(null);
    }
    // Run rand_value() every 2 seconds
    window.setInterval(rand_value, 500);
}
	</script>


    </body>
</html>

